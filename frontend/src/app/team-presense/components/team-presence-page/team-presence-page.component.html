<div class="container">
  <div class="row">
    <div class="col-md-12">

      <app-team-presence-filters [filtersForm]="filtersForm"
                                 [projects]="projects"
                                 [jobPositions]="jobPositions"
                                 [subdivisions]="subdivisions"
                                 [locations]="locations"></app-team-presence-filters>

      <app-month-selector [date]="date$ | async"
                          (nextMonth)="nextMonth()"
                          (prevMonth)="prevMonth()"></app-month-selector>


      <div class="table"
           *ngIf="monthData?.length">
        <div class="row-item table-header" [ngStyle]="{'grid-template-columns': getStyleForGridPerMonth()}">
          <div class="number"></div>
          <div class="title header">Сотрудник</div>
          <div class="day header"
               *ngFor="let date of (monthDays$ | async)"
               [class.currentDay]="date | isCurrentDayPipe"
               [ngClass]="convertDate(date) | isHolidayData: holidays">
            <div class="day-header">
              <div class="day-wrapper">{{ date | datePipe: 'D' }}</div>
            </div>
            <div>{{ date | datePipe: 'ddd' }}</div>
          </div>
        </div>


        <div class="table-scrolled">
          <div *ngFor="let data of monthData; index as i"
               class="row-item" [ngStyle]="{'grid-template-columns': getStyleForGridPerMonth()}">
            <div class="number">{{i + 1}}.</div>
            <div class="title">
              <div>
                <a
                  [routerLink]="['/presence', data.employee.mailNickname]">{{ data.employee?.username?.split(' ')[0] }} {{ data.employee?.username?.split(' ')[1] }}
                </a>
              </div>
              <div class="jobPosition">{{ data.employee?.jobPosition?.name }}</div>
            </div>
            <div *ngFor="let date of (monthDays$ | async)">0</div>
<!--            <div *ngFor="let task of data.tasks"-->
<!--                 [matTooltip]="task.comment"-->
<!--                 class="day {{ task?.type ? dayType[(task?.type)] : '' }}"></div>-->
          </div>
        </div>


      </div>
      <div class="agenda__wrapper">
        <app-agenda [isLineView]="true"></app-agenda>
      </div>
    </div>
  </div>
</div>
